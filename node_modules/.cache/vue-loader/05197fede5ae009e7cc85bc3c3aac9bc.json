{"remainingRequest":"/Users/edy/Documents/other/vue-system-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/edy/Documents/other/vue-system-admin/src/components/common/commonTags.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/edy/Documents/other/vue-system-admin/src/components/common/commonTags.vue","mtime":1711099068124},{"path":"/Users/edy/Documents/other/vue-system-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edy/Documents/other/vue-system-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/edy/Documents/other/vue-system-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edy/Documents/other/vue-system-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBidXMgZnJvbSAiLi4vLi4vc2VydmljZS9idXMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogImNvbW1vblRhZ3MiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWdzTGlzdDogW10sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuc2V0VGFncyh0aGlzLiRyb3V0ZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDliKTmlq3lvZPliY3ot6/nlLHmmK/lkKbljLnphY3lvZPliY10YWcKICAgIGlzQWN0aXZlKHBhdGgpIHsKICAgICAgcmV0dXJuIHBhdGggPT09IHRoaXMuJHJvdXRlLmZ1bGxQYXRoOwogICAgfSwKCiAgICAvLyDlhbPpl63moIfnrb4KICAgIGNsb3NlVGFncyhpbmRleCkgewogICAgICBsZXQgY3VycmVudEl0ZW0gPSB0aGlzLnRhZ3NMaXN0LnNwbGljZShpbmRleCwgMSlbMF07CiAgICAgIGxldCBpdGVtID0gdGhpcy50YWdzTGlzdFtpbmRleF0KICAgICAgICA/IHRoaXMudGFnc0xpc3RbaW5kZXhdCiAgICAgICAgOiB0aGlzLnRhZ3NMaXN0W2luZGV4IC0gMV07CiAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgY3VycmVudEl0ZW0ucGF0aCA9PT0gdGhpcy4kcm91dGUuZnVsbFBhdGggJiYKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGl0ZW0ucGF0aCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9kYXNoYm9hcmQiKTsKICAgICAgfQogICAgfSwKCiAgICAvLyDorr7nva7moIfnrb4KICAgIHNldFRhZ3Mocm91dGUpIHsKICAgICAgbGV0IGlzRXhpc3QgPSB0aGlzLnRhZ3NMaXN0LmZpbmQoKGl0ZW0pID0+IHsKICAgICAgICByZXR1cm4gaXRlbS5wYXRoID09PSByb3V0ZS5mdWxsUGF0aDsKICAgICAgfSk7CiAgICAgIGlmICghaXNFeGlzdCkgewogICAgICAgIGlmICh0aGlzLnRhZ3NMaXN0Lmxlbmd0aCA+PSA4KSB7CiAgICAgICAgICB0aGlzLnRhZ3NMaXN0LnNoaWZ0KCk7CiAgICAgICAgfQogICAgICAgIHRoaXMudGFnc0xpc3QucHVzaCh7CiAgICAgICAgICB0aXRsZTogcm91dGUubWV0YS50aXRsZSwKICAgICAgICAgIHBhdGg6IHJvdXRlLmZ1bGxQYXRoLAogICAgICAgIH0pOwogICAgICB9CiAgICAgIGJ1cy4kZW1pdCgidGFncyIsIHRoaXMudGFnc0xpc3QpOwogICAgfSwKCiAgICAvLyDlhbPpl63lhbbku5bpgInpobkKICAgIGhhbmRsZUNsb3NlT3RoZXIoKSB7CiAgICAgIGxldCBjdXJyZW50SXRlbSA9IHRoaXMudGFnc0xpc3QuZmlsdGVyKChpdGVtKSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ucGF0aCA9PT0gdGhpcy4kcm91dGUuZnVsbFBhdGg7CiAgICAgIH0pOwogICAgICB0aGlzLnRhZ3NMaXN0ID0gY3VycmVudEl0ZW07CiAgICB9LAoKICAgIC8vIOWFs+mXreaJgOaciemAiemhuQogICAgaGFuZGxlQ2xvc2VBbGwoKSB7CiAgICAgIHRoaXMudGFnc0xpc3QgPSBbXTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9kYXNoYm9hcmQiKTsKICAgIH0sCgogICAgLy8g5qCH562+6YCJ6aG5CiAgICBoYW5kbGVUYWdzKHZhbCkgewogICAgICB2YWwgPT09ICJvdGhlciIgPyB0aGlzLmhhbmRsZUNsb3NlT3RoZXIoKSA6IHRoaXMuaGFuZGxlQ2xvc2VBbGwoKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuc2V0VGFncyhuZXdWYWx1ZSk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dUYWdzKCkgewogICAgICByZXR1cm4gdGhpcy50YWdzTGlzdCAmJiB0aGlzLnRhZ3NMaXN0Lmxlbmd0aCA+IDA7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["commonTags.vue"],"names":[],"mappings":";AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"commonTags.vue","sourceRoot":"src/components/common","sourcesContent":["<template>\n  <div class=\"tags\" v-if=\"showTags\">\n    <ul>\n      <li\n        class=\"tags-li\"\n        v-for=\"(item, index) in tagsList\"\n        :key=\"index\"\n        :class=\"{'active': isActive(item.path)}\"\n      >\n        <router-link :to=\"item.path\" class=\"tags-li-title\">{{item.title}}</router-link>\n        <span class=\"tags-li-icon\" @click=\"closeTags(index)\">\n          <i class=\"el-icon-close\"></i>\n        </span>\n      </li>\n    </ul>\n    <div class=\"tags-close-box\">\n      <el-dropdown @command=\"handleTags\">\n        <el-button size=\"mini\" type=\"primary\" style=\"border-radius: 2px !important\">\n          标签选项\n          <i class=\"el-icon-arrow-down el-icon--right\"></i>\n        </el-button>\n        <el-dropdown-menu size=\"small\" slot=\"dropdown\">\n          <el-dropdown-item command=\"other\">关闭其他</el-dropdown-item>\n          <el-dropdown-item command=\"all\">关闭所有</el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n    </div>\n  </div>\n</template>\n\n<script>\nimport bus from \"../../service/bus\";\nexport default {\n  name: \"commonTags\",\n  data() {\n    return {\n      tagsList: [],\n    };\n  },\n  created() {\n    this.setTags(this.$route);\n  },\n  methods: {\n    // 判断当前路由是否匹配当前tag\n    isActive(path) {\n      return path === this.$route.fullPath;\n    },\n\n    // 关闭标签\n    closeTags(index) {\n      let currentItem = this.tagsList.splice(index, 1)[0];\n      let item = this.tagsList[index]\n        ? this.tagsList[index]\n        : this.tagsList[index - 1];\n      if (item) {\n        currentItem.path === this.$route.fullPath &&\n          this.$router.push(item.path);\n      } else {\n        this.$router.push(\"/dashboard\");\n      }\n    },\n\n    // 设置标签\n    setTags(route) {\n      let isExist = this.tagsList.find((item) => {\n        return item.path === route.fullPath;\n      });\n      if (!isExist) {\n        if (this.tagsList.length >= 8) {\n          this.tagsList.shift();\n        }\n        this.tagsList.push({\n          title: route.meta.title,\n          path: route.fullPath,\n        });\n      }\n      bus.$emit(\"tags\", this.tagsList);\n    },\n\n    // 关闭其他选项\n    handleCloseOther() {\n      let currentItem = this.tagsList.filter((item) => {\n        return item.path === this.$route.fullPath;\n      });\n      this.tagsList = currentItem;\n    },\n\n    // 关闭所有选项\n    handleCloseAll() {\n      this.tagsList = [];\n      this.$router.push(\"/dashboard\");\n    },\n\n    // 标签选项\n    handleTags(val) {\n      val === \"other\" ? this.handleCloseOther() : this.handleCloseAll();\n    },\n  },\n  watch: {\n    $route(newValue) {\n      this.setTags(newValue);\n    },\n  },\n  computed: {\n    showTags() {\n      return this.tagsList && this.tagsList.length > 0;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.tags {\n  position: relative;\n  height: 38px;\n  overflow: hidden;\n  background: #fff;\n  padding-right: 120px;\n  box-shadow: 0 5px 10px #ddd;\n}\n\n.tags ul {\n  box-sizing: border-box;\n  width: 100%;\n  height: 100%;\n}\n\n.tags-li {\n  float: left;\n  margin: 5px;\n  font-size: 12px;\n  overflow: hidden;\n  cursor: pointer;\n  height: 26px;\n  line-height: 28px;\n  border: 1px solid #e9eaec;\n  background: #fff;\n  padding: 0 5px 0 12px;\n  vertical-align: middle;\n  color: #666;\n  -webkit-transition: all 0.3s ease-in;\n  -moz-transition: all 0.3s ease-in;\n  transition: all 0.3s ease-in;\n  border-radius: 2px;\n}\n\n.tags-li .active .tags-li-icon {\n  background-color: red;\n}\n\n.tags-li:not(.active):hover {\n  background: #f8f8f8;\n}\n\n.tags-li.active {\n  color: #fff;\n}\n\n.tags-li-title {\n  float: left;\n  max-width: 80px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  margin-right: 5px;\n  color: #666;\n}\n\n.tags-li.active .tags-li-title {\n  color: #fff;\n}\n\n.tags-close-box {\n  position: absolute;\n  right: 5px;\n  top: 0;\n  box-sizing: border-box;\n  padding-top: 5px;\n  text-align: center;\n  height: 30px;\n  z-index: 10;\n}\n\n.tags-li.active {\n  border: 1px solid #6190e8;\n  background-color: #6190e8;\n}\n</style>\n"]}]}